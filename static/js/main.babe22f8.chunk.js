(this.webpackJsonpmegapolis=this.webpackJsonpmegapolis||[]).push([[0],{34:function(e,t,a){e.exports=a.p+"static/media/spinner-dark.b9a0116b.svg"},38:function(e,t,a){e.exports=a(62)},43:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},53:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){},58:function(e,t,a){},59:function(e,t,a){},60:function(e,t,a){},61:function(e,t,a){},62:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(20),s=a.n(r),o=(a(43),a(44),a(45),a(46),a(47),a(15)),l=a(8),i=a(12),u=a(36),m=a(32),E={FETCH_TASKS_START:"FETCH_TASKS_START",FETCH_TASKS_SUCCESS:"FETCH_TASKS_SUCCESS",FETCH_TASKS_FAILURE:"FETCH_TASKS_FAILURE",ADD_TASK_START:"ADD_TASK_START",ADD_TASK_SUCCESS:"ADD_TASK_SUCCESS",ADD_TASK_FAILURE:"ADD_TASK_FAILURE",DELETE_TASK_START:"DELETE_TASK_START",DELETE_TASK_SUCCESS:"DELETE_TASK_SUCCESS",DELETE_TASK_FAILURE:"DELETE_TASK_FAILURE",EDIT_TASK_START:"EDIT_TASK_START",EDIT_TASK_SUCCESS:"EDIT_TASK_SUCCESS",EDIT_TASK_FAILURE:"EDIT_TASK_FAILURE"};function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(a,!0).forEach((function(t){Object(m.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var f={isFetching:!1,errorMessage:void 0,tasks:[]},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E.FETCH_TASKS_START:return p({},e,{isFetching:!0,currentId:t.payload});case E.FETCH_TASKS_SUCCESS:return p({},e,{tasks:t.payload,isFetching:!1});case E.ADD_TASK_START:return p({},e);case E.ADD_TASK_SUCCESS:return p({},e,{isFetching:!1});case E.FETCH_TASKS_FAILURE:case E.ADD_TASK_FAILURE:return p({},e,{errorMessage:t.payload,isFetching:!1});default:return e}},_=Object(i.c)({tasks:S}),T=a(5),v=a.n(T),b=a(6),h=a(19),A=a.n(h),y=function(e){return{type:E.FETCH_TASKS_START,payload:e}},O=function(e){return{type:E.FETCH_TASKS_SUCCESS,payload:e}},g=function(e){return{type:E.FETCH_TASKS_FAILURE,payload:e}},w=function(e){return{type:E.ADD_TASK_SUCCESS,payload:e}},j=function(e){return{type:E.ADD_TASK_FAILURE,payload:e}},C=function(e){return{type:E.DELETE_TASK_START,payload:e}},x=function(e){return{type:E.DELETE_TASK_SUCCESS,payload:e}},D=function(e){return{type:E.DELETE_TASK_FAILURE,payload:e}},N=function(e){return{type:E.EDIT_TASK_SUCCESS,payload:e}},k=function(e){return{type:E.EDIT_TASK_FAILURE,payload:e}},K="https://test.megapolis-it.ru",L=v.a.mark(V),R=v.a.mark(J),F=v.a.mark(W),U=v.a.mark(B),I=v.a.mark(X),H=v.a.mark($),M=v.a.mark(q),P=v.a.mark(G),z=v.a.mark(Q);function V(){var e,t;return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,A()("".concat(K,"/api/list"));case 3:return e=a.sent,a.next=6,e.json();case 6:return t=a.sent,a.next=9,Object(b.c)(O(t.data));case 9:a.next=15;break;case 11:return a.prev=11,a.t0=a.catch(0),a.next=15,Object(b.c)(g(a.t0.message));case 15:case"end":return a.stop()}}),L,null,[[0,11]])}function J(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.d)(E.FETCH_TASKS_START,V);case 2:case"end":return e.stop()}}),R)}function W(e){var t,a,n;return v.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,c.prev=1,c.next=4,A()("".concat(K,"/api/list"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 4:return a=c.sent,c.next=7,a.json();case 7:return n=c.sent,c.next=10,Object(b.c)(w(n.data));case 10:return c.next=12,V();case 12:c.next=18;break;case 14:return c.prev=14,c.t0=c.catch(1),c.next=18,Object(b.c)(j(c.t0.message));case 18:case"end":return c.stop()}}),F,null,[[1,14]])}function B(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.d)(E.ADD_TASK_START,W);case 2:case"end":return e.stop()}}),U)}function X(e){var t,a,n;return v.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,c.prev=1,c.next=4,A()("".concat(K,"/api/list/").concat(t),{method:"DELETE",headers:{"Content-Type":"application/json"}});case 4:return a=c.sent,c.next=7,a.json();case 7:return n=c.sent,c.next=10,Object(b.c)(x(n.data));case 10:return c.next=12,V();case 12:c.next=18;break;case 14:return c.prev=14,c.t0=c.catch(1),c.next=18,Object(b.c)(D(c.t0.message));case 18:case"end":return c.stop()}}),I,null,[[1,14]])}function $(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.d)(E.DELETE_TASK_START,X);case 2:case"end":return e.stop()}}),H)}function q(e){var t,a,n,c,r;return v.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,a=t.id,n=t.value,s.prev=2,s.next=5,A()("".concat(K,"/api/list/").concat(a),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:n})});case 5:return c=s.sent,s.next=8,c.json();case 8:return r=s.sent,s.next=11,Object(b.c)(N(r.data));case 11:return s.next=13,V();case 13:s.next=19;break;case 15:return s.prev=15,s.t0=s.catch(2),s.next=19,Object(b.c)(k(s.t0.message));case 19:case"end":return s.stop()}}),M,null,[[2,15]])}function G(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.d)(E.EDIT_TASK_START,q);case 2:case"end":return e.stop()}}),P)}function Q(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.a)([Object(b.b)(J),Object(b.b)(B),Object(b.b)($),Object(b.b)(G)]);case 2:case"end":return e.stop()}}),z)}var Y=v.a.mark(Z);function Z(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.a)([Object(b.b)(Q)]);case 2:case"end":return e.stop()}}),Y)}var ee=Object(u.a)(),te=[ee],ae=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||i.d,ne=Object(i.e)(_,ae(i.a.apply(void 0,te)));ee.run(Z);var ce=a(13),re=(a(53),function(){return c.a.createElement("footer",{className:"footer"},c.a.createElement("div",{className:"section-wrapper h-100 d-flex align-items-center"},'\xa9 2019 \u0410\u041e "\u041c\u0435\u0433\u0430\u043f\u043e\u043b\u0438\u0441"'))}),se=a(17),oe=(a(54),a(55),function(e){var t=e.type,a=void 0===t?"text":t,n=e.onClick,r=e.text,s=e.view,o=void 0===s?"green":s,l=e.className,i=void 0===l?"":l;return c.a.createElement("button",{type:a,onClick:n,className:"button button_".concat(o," ").concat(i)},r)}),le=(a(56),a(23)),ie=function(e){return e.tasks},ue=Object(le.a)([ie],(function(e){return e.tasks})),me=Object(le.a)([ie],(function(e){return e.isFetching})),Ee=Object(le.a)([ie],(function(e){return e.tasks.filter((function(t){return+t.id===+e.currentId}))[0]})),de=function(e){var t=e.className;return c.a.createElement("svg",{className:t,version:"1.1",id:"\u0421\u043b\u043e\u0439_1",xmlns:"http://www.w3.org/2000/svg",x:"0",y:"0",width:"17.824",height:"22",xmlSpace:"preserve"},c.a.createElement("style",null),c.a.createElement("path",{className:"st0",d:"M7.042 7.265c-.276 0-.5.224-.5.5v10.353c0 .276.224.5.5.5s.5-.224.5-.5V7.765c0-.277-.224-.5-.5-.5zM10.854 7.265c-.276 0-.5.224-.5.5v10.353c0 .276.224.5.5.5s.5-.224.5-.5V7.765c0-.277-.224-.5-.5-.5z"}),c.a.createElement("path",{className:"st0",d:"M17.324 4.029h-2.665c-.174-.087-.363-.147-.571-.147h-1.294V2.588C12.794 1.159 11.635 0 10.206 0H7.618c-1.43 0-2.589 1.159-2.589 2.588v1.294H3.735c-.208 0-.397.06-.571.147H.5c-.276 0-.5.224-.5.5s.224.5.5.5h1.971c-.006.051-.03.095-.03.147v15.529c0 .716.58 1.295 1.294 1.295h10.353c.715 0 1.294-.579 1.294-1.294V5.176c0-.052-.024-.097-.03-.147h1.971c.276 0 .5-.224.5-.5s-.223-.5-.499-.5zM6.029 2.588C6.029 1.712 6.742 1 7.618 1h2.588c.875 0 1.588.712 1.588 1.588v1.294H6.029V2.588zm8.353 18.118c0 .162-.132.294-.294.294H3.735a.2945.2945 0 01-.294-.294V5.176c0-.057.032-.102.061-.147h1.527v.147h7.765v-.147h1.527c.029.045.061.09.061.147v15.53z"}))},pe=function(e){var t=e.className;return c.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"23",height:"23",className:t},c.a.createElement("path",{d:"M22.553 4.959L18.027.428c-.55-.551-1.509-.552-2.062 0L1.291 15.089a.4955.4955 0 00-.14.274L.006 22.421c-.025.158.027.32.141.434a.5013.5013 0 00.436.138l7.025-1.173a.5036.5036 0 00.271-.14c3.798-3.801 5.593-5.591 7.404-7.396l.211-.212c1.741-1.735 3.525-3.515 7.005-7.006.294-.219.47-.549.498-.93.03-.428-.135-.868-.444-1.177zM1.105 21.892l1.008-6.21.19-.189c.023.044.046.089.083.126l5.06 5.081-.161.161-6.18 1.031zm13.682-8.526l-.211.211c-1.645 1.64-3.295 3.285-6.424 6.416l-5.058-5.079c-.038-.038-.083-.062-.128-.085L13.232 4.573l5.231 5.125c-1.508 1.507-2.601 2.597-3.676 3.668zm7.059-7.052c-1.031 1.032-1.901 1.902-2.677 2.678l-5.231-5.125 2.734-2.731c.175-.175.475-.173.647 0l4.526 4.531c.103.103.163.26.152.4-.005.088-.038.156-.151.247z"}))},fe=function(){var e=Object(l.c)(ue),t=Object(l.b)();return c.a.createElement("div",null,c.a.createElement("table",{className:"task-table"},c.a.createElement("tbody",null,e&&e.map((function(e,a){return c.a.createElement("tr",{key:a},c.a.createElement("td",{className:"task-table__id"},"\u0417\u0430\u0434\u0430\u0447\u0430 \u2116",e.id),c.a.createElement("td",{className:"task-table__title"},e.title),c.a.createElement("td",{className:"task-table__actions-cell"},c.a.createElement(o.b,{to:"/items/".concat(e.id)},c.a.createElement("span",{className:"task-table__edit"},c.a.createElement(pe,{className:"task-table__edit-icon"}))),c.a.createElement("span",{className:"delete-btn",onClick:function(){return t(C(e.id))}},c.a.createElement(de,{className:"delete-btn__delete-icon"}))))})))))},Se=a(37),_e=a(34),Te=a.n(_e),ve=(a(58),function(){return c.a.createElement("div",{style:{textAlign:"center"}},c.a.createElement("img",{src:Te.a,alt:"spinner"}))}),be=function(e){return function(t){var a=t.isLoading,n=Object(Se.a)(t,["isLoading"]);return a?c.a.createElement(ve,null):c.a.createElement(e,n)}};a(59);var he=function(e){var t=e.className;return c.a.createElement("svg",{className:t,xmlns:"http://www.w3.org/2000/svg",width:"15",height:"15"},c.a.createElement("path",{d:"M8.207 7.5L14.853.854c.195-.195.195-.512 0-.707s-.512-.195-.707 0L7.5 6.793.854.146C.659-.049.342-.049.147.146s-.195.512 0 .707L6.793 7.5.147 14.146a.5003.5003 0 000 .707c.097.098.225.147.353.147s.256-.049.354-.146L7.5 8.207l6.646 6.646c.098.098.226.147.354.147s.256-.049.354-.146a.5003.5003 0 000-.707L8.207 7.5z"}))},Ae=function(e){var t=e.setModalVisibility,a=e.children;return Object(n.useEffect)((function(){var e=document.body;e.style.paddingRight=function(){var e=document.createElement("div");e.style.visibility="hidden",e.style.width="100px",e.style.msOverflowStyle="scrollbar",document.body.appendChild(e);var t=e.offsetWidth;e.style.overflow="scroll";var a=document.createElement("div");a.style.width="100%",e.appendChild(a);var n=a.offsetWidth;return e.parentNode.removeChild(e),t-n}()+"px",e.style.overflow="hidden"}),[]),Object(n.useEffect)((function(){return function(){var e=document.body;e.style.paddingRight="",e.style.overflow="auto"}}),[]),c.a.createElement("div",{className:"modal",onClick:function(){return t(!1)}},c.a.createElement("div",{className:"modal__content",onClick:function(e){return e.stopPropagation()}},c.a.createElement("span",{className:"modal__close",onClick:function(){return t(!1)}},c.a.createElement(he,{color:"#ff0000"})),a))},ye=(a(60),function(e){var t=e.switchModal,a=Object(n.useState)({}),r=Object(se.a)(a,2),s=r[0],o=r[1],i=Object(n.useState)(!1),u=Object(se.a)(i,2),m=u[0],d=u[1],p=Object(l.b)();return c.a.createElement("div",{className:"add-form"},c.a.createElement("div",{className:"mb-2"},"\u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"),c.a.createElement("div",{className:"mb-4 position-relative"},c.a.createElement("input",{className:"add-form__input-text",type:"text",onChange:function(e){var t=e.target.value;d(!1),o({title:t})}}),m&&c.a.createElement("span",{className:"add-form__error"},"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c")),c.a.createElement("div",null,c.a.createElement(oe,{text:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",view:"green",className:"ml-auto",onClick:function(){var e;s.title&&s.title?(p((e=s,{type:E.ADD_TASK_START,payload:e})),t(!1)):d(!0)}})))}),Oe=function(){var e=Object(l.b)(),t=Object(l.c)(me),a=be(fe),r=Object(n.useState)(!1),s=Object(se.a)(r,2),o=s[0],i=s[1];return Object(n.useEffect)((function(){e(y())}),[e]),c.a.createElement("div",{className:"homepage"},c.a.createElement("div",{className:"homepage__upper-row"},c.a.createElement("h1",null,"\u0421\u043f\u0438\u0441\u043e\u043a \u0437\u0430\u0434\u0430\u0447"),c.a.createElement(oe,{className:"ml-auto",text:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",view:"green",onClick:i})),c.a.createElement(a,{isLoading:t}),o&&c.a.createElement(Ae,{setModalVisibility:i},c.a.createElement(ye,{switchModal:i})))},ge=a(35),we=(a(61),Object(ce.f)((function(e){var t=Object(ge.a)({},e).match.params.id,a=Object(n.useState)(""),r=Object(se.a)(a,2),s=r[0],i=r[1],u=Object(l.b)();Object(n.useEffect)((function(){u(y(t))}),[u,t]);var m=Object(l.c)(Ee);return Object(n.useEffect)((function(){m&&i(m.title)}),[m]),c.a.createElement("div",{className:"task-page"},c.a.createElement("div",{className:"d-flex align-items-center"},c.a.createElement("h1",null,"\u0417\u0430\u0434\u0430\u0447\u0430 \u2116",t),c.a.createElement(o.b,{className:"btn-link ml-auto",to:"/",onClick:function(){return u(C(t))}},c.a.createElement("span",{className:"delete-btn "},c.a.createElement(de,{className:"delete-btn__delete-icon"})))),c.a.createElement("div",{className:"mb-2"},"\u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"),c.a.createElement("div",{className:"mb-5 row"},c.a.createElement("div",{className:"col-6"},c.a.createElement("input",{type:"text",onChange:function(e){return i(e.target.value)},className:"task-page__summary",value:s}))),c.a.createElement("div",null,c.a.createElement(o.b,{className:"btn-link mr-3",onClick:function(){return u(function(e,t){return{type:E.EDIT_TASK_START,payload:{id:e,value:t}}}(t,s))},to:"/"},c.a.createElement(oe,{text:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",view:"green"})),c.a.createElement(o.b,{className:"btn-link",to:"/"},c.a.createElement(oe,{text:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043a \u0441\u043f\u0438\u0441\u043a\u0443",view:"blue"}))))})));var je=function(){return c.a.createElement("div",{className:"site"},c.a.createElement("div",{className:"content"},c.a.createElement(ce.c,null,c.a.createElement(ce.a,{exact:!0,path:"/",component:Oe}),c.a.createElement(ce.a,{exact:!0,path:"/items/:id",component:we}))),c.a.createElement(re,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(c.a.createElement(l.a,{store:ne},c.a.createElement(o.a,{basename:"/megapolis"},c.a.createElement(je,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[38,1,2]]]);
//# sourceMappingURL=main.babe22f8.chunk.js.map